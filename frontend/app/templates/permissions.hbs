<div class="container">
    <h3>
        Edit permissions for
        {{#link-to 'album' model.id}}
            <strong>
                {{model.name}}
            </strong>
        {{/link-to}}
    </h3>


    <form class="form-horizontal" role="form">

        <div class="form-group">

            <label class="col-sm-3 control-label">
                Allow anyone to view the album?
            </label>

            <div class="col-sm-9">
                <div class="checkbox">
                    <label {{action 'toggle_anon'}}>
                        {{input type="checkbox" checked=allow_anon}} Anonymous Viewers
                    </label>
                </div>
            </div>
        </div>

        {{#if allow_anon}}

            <div class="form-group">
                <label class="col-sm-3 control-label">
                    Public sharing URL:
                </label>

                <div class="col-sm-9">
                    <p class="form-control-static">

                        <a {{bind-attr href=model.public_url}}>
                            {{model.public_url}}
                        </a>
                    </p>

                </div>
            </div>


        {{/if}}

    </form>

    <h4>
        Fine grained permissions
    </h4>

    <table class="table table-hover">
        <thead>
        <tr>
            <th>Name</th>
            <th>View</th>
            <th>Edit</th>
            <th>Move</th>
            <th>Upload</th>
            <th>Delete</th>
            <th>Owner</th>
            <th></th>
        </tr>
        </thead>
        <tbody>

        {{#each perm in model.resolved_permissions}}
            <tr>
                {{#if perm.owner}}
                    <td>
                        {{perm._user.full_name}}
                    </td>
                    <td><i class="fa fa-check"></i></td>
                    <td><i class="fa fa-check"></i></td>
                    <td><i class="fa fa-check"></i></td>
                    <td><i class="fa fa-check"></i></td>
                    <td><i class="fa fa-check"></i></td>
                    <td><i class="fa fa-check"></i></td>
                    <td></td>
                {{else}}
                    <td>
                        {{perm._user.full_name}}
                    </td>
                    {{check-box save="save" value=perm.view}}
                    {{check-box save="save" value=perm.edit}}
                    {{check-box save="save" value=perm.move}}
                    {{check-box save="save" value=perm.upload}}
                    {{check-box save="save" value=perm.delete}}
                    <td></td>
                    <td class="check-box" {{action 'remove' perm}}><i class="fa fa-trash"></i></td>
                {{/if}}
            </tr>
        {{/each}}
        <tr>
            <td>

                <a href="" {{action 'add_permission'}}>
                    <i class="fa fa-lg fa-plus"></i>
                    Add user
                </a>
            </td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>


</div>